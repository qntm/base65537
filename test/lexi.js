const assert = require('assert')
const lexi = require('../src/lexi.js')

const b = lexi(256)

console.log('lexi(256).values2lexi()')
assert.deepStrictEqual(b.values2lexi([]), [])
assert.deepStrictEqual(b.values2lexi([0]), [1])
assert.deepStrictEqual(b.values2lexi([1]), [2])
assert.deepStrictEqual(b.values2lexi([37]), [38])
assert.deepStrictEqual(b.values2lexi([38]), [39])
assert.deepStrictEqual(b.values2lexi([37, 0]), [38, 1])
assert.deepStrictEqual(b.values2lexi([37, 1]), [38, 2])
assert.deepStrictEqual(b.values2lexi([37, 255]), [39, 0])
assert.deepStrictEqual(b.values2lexi([38, 0]), [39, 1])
assert.deepStrictEqual(b.values2lexi([38, 255]), [40, 0])
assert.deepStrictEqual(b.values2lexi([37, 0, 0]), [38, 1, 1])
assert.deepStrictEqual(b.values2lexi([37, 0, 255]), [38, 2, 0])
assert.deepStrictEqual(b.values2lexi([37, 1, 0]), [38, 2, 1])
assert.deepStrictEqual(b.values2lexi([37, 255, 0]), [39, 0, 1])
console.log()

console.log('lexi(256).lexi2values()')
assert.deepStrictEqual(b.lexi2values([]), [])
assert.deepStrictEqual(b.lexi2values([1]), [0])
assert.deepStrictEqual(b.lexi2values([2]), [1])
assert.deepStrictEqual(b.lexi2values([38]), [37])
assert.deepStrictEqual(b.lexi2values([39]), [38])
assert.deepStrictEqual(b.lexi2values([38, 1]), [37, 0])
assert.deepStrictEqual(b.lexi2values([38, 2]), [37, 1])
assert.deepStrictEqual(b.lexi2values([39, 0]), [37, 255])
assert.deepStrictEqual(b.lexi2values([39, 1]), [38, 0])
assert.deepStrictEqual(b.lexi2values([40, 0]), [38, 255])
assert.deepStrictEqual(b.lexi2values([38, 1, 1]), [37, 0, 0])
assert.deepStrictEqual(b.lexi2values([38, 2, 0]), [37, 0, 255])
assert.deepStrictEqual(b.lexi2values([38, 2, 1]), [37, 1, 0])
assert.deepStrictEqual(b.lexi2values([39, 0, 1]), [37, 255, 0])
console.log()

console.log('lexi(65537) bug')
assert.deepStrictEqual(lexi(65537).values2lexi([]), [])
assert.deepStrictEqual(lexi(65537).values2lexi([0]), [1])
assert.deepStrictEqual(lexi(65537).values2lexi([1]), [2])
assert.deepStrictEqual(lexi(65537).lexi2values([]), [])
assert.deepStrictEqual(lexi(65537).lexi2values([1]), [0])
assert.deepStrictEqual(lexi(65537).lexi2values([2]), [1])
console.log()
